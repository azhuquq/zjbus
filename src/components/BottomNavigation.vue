<template>
    <v-layout class="overflow-visible" style="height: 56px;">
        <v-bottom-navigation color="primary" mode="shift" v-model="value" mandatory>
            <v-btn @click="navigateTo('/')" value="/" rounded="pill">
                <v-icon>{{ getIcon('/', 'route') }}</v-icon>
                <span>è·¯çº¿</span>
            </v-btn>
            <v-btn @click="navigateTo('/favourite')" value="/favourite" rounded="pill">
                <v-icon>{{ getIcon('/favourite', 'star') }}</v-icon>
                <span>æ”¶è—</span>
            </v-btn>
            <v-btn @click="navigateTo('/search')" value="/search" rounded="pill">
                <v-icon>{{ getIcon('/search', 'search') }}</v-icon>
                <span>æœç´¢</span>
            </v-btn>
            <v-btn @click="navigateTo('/planning')" value="/planning" rounded="pill">
                <v-icon>{{ getIcon('/planning', 'signpost') }}</v-icon>
                <span>ç«™ç‚¹</span>
            </v-btn>
            <v-btn @click="navigateTo('/notice')" value="/notice" rounded="pill">
                <v-icon>{{ getIcon('/notice', 'sticky-note') }}</v-icon>
                <span>é€šå‘Š</span>
            </v-btn>
        </v-bottom-navigation>
    </v-layout>
</template>

<script>
export default {
    data() {
        return {
            value: '/'
        }
    },
    mounted() {
        this.value = this.$route.path // åˆå§‹åŒ–æ—¶è®¾ç½®å½“å‰è·¯ç”±çš„è·¯å¾„
        console.log("ğŸš© ~ mounted ~ this.value ğŸ‘‡\n", this.value)

        // ç›‘å¬è·¯ç”±å˜åŒ–
        this.$watch(
            () => this.$route.path,
            (newPath) => {
                console.log("ğŸš© ~ path changed ~ newPath ğŸ‘‡\n", newPath)
                this.value = newPath
            }
        )
    },
    methods: {
        navigateTo(path) {
            this.$router.push(path)
        },
        getIcon(path, icon) {
            // åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦ä¸ºé€‰ä¸­çš„è·¯å¾„ï¼Œè¿”å›ç›¸åº”çš„å›¾æ ‡
            return this.value === path ? `ri:${icon}-fill` : `ri:${icon}-line`
        }
    }
}
</script>
